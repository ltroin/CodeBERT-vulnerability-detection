import json

#This code extracts the inx of each josn file and writes it to a txt file.
#Does not influence the training progress. Can be omitted.
def extract_idx_and_write_to_txt(input_file, output_file):
    """
    This function processes a JSON lines file where each line is a JSON object. 
    It extracts the value associated with the key 'idx' from each JSON object and writes it to an output text file.

    Args:
        input_file (str): The path to the JSON lines input file.
        output_file (str): The path to the output text file where 'idx' values will be written.

    Returns:
        None
    """
    # Load JSON lines from the input file into a list
    js_all = [json.loads(line) for line in open(input_file)]

    # Open the output file for writing
    with open(output_file, 'w') as out_file:
        for entry in js_all:
            if 'idx' in entry:
                idx_value = entry['idx']
                # Write the 'idx' value to the output file
                out_file.write(str(idx_value) + '\n')

if __name__ == "__main__":
    extract_idx_and_write_to_txt('./valid.jsonl', 'valid.txt')
